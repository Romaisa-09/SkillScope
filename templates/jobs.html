{% extends 'base.html' %}

{% block title %}Browse Jobs - SkillScope{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="mb-4"><i class="bi bi-briefcase"></i> Browse Job Listings</h1>
    
    <!-- Filter Section -->
    <div class="filter-section">
        <form method="GET" action="">
            <div class="row g-3">
                <div class="col-md-3">
                    <input type="text" name="search" class="form-control" placeholder="Search jobs..." value="{{ search }}">
                </div>
                <div class="col-md-2">
                    <input type="text" name="location" class="form-control" placeholder="Location" value="{{ location }}">
                </div>
                <div class="col-md-2">
                    <select name="job_type" class="form-select">
                        <option value="">Job Type</option>
                        <option value="full_time" {% if job_type == 'full_time' %}selected{% endif %}>Full Time</option>
                        <option value="part_time" {% if job_type == 'part_time' %}selected{% endif %}>Part Time</option>
                        <option value="contract" {% if job_type == 'contract' %}selected{% endif %}>Contract</option>
                        <option value="internship" {% if job_type == 'internship' %}selected{% endif %}>Internship</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <select name="experience" class="form-select">
                        <option value="">Experience</option>
                        <option value="entry" {% if experience == 'entry' %}selected{% endif %}>Entry Level</option>
                        <option value="mid" {% if experience == 'mid' %}selected{% endif %}>Mid Level</option>
                        <option value="senior" {% if experience == 'senior' %}selected{% endif %}>Senior</option>
                        <option value="lead" {% if experience == 'lead' %}selected{% endif %}>Lead</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <input type="text" name="skill" class="form-control" placeholder="Skill" value="{{ skill }}">
                </div>
                <div class="col-md-1">
                    <button type="submit" class="btn btn-primary-custom w-100">
                        <i class="bi bi-funnel"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
    
    <!-- Jobs List -->
    <div class="row mt-4">
        {% for job in jobs %}
        <div class="col-md-6">
            <div class="job-card">
                <div class="d-flex mb-3">
                    <div class="company-logo">
                        {{ job.company.name|slice:":1"|upper }}
                    </div>
                    <div class="flex-grow-1">
                        <h5>{{ job.title }}</h5>
                        <p class="company-name">
                            <i class="bi bi-building"></i> {{ job.company.name }}
                        </p>
                    </div>
                </div>
                
                <p class="text-muted">{{ job.description|truncatewords:20 }}</p>
                
                <div class="mb-3">
                    <span class="job-badge primary">
                        <i class="bi bi-geo-alt"></i> {{ job.location|default:"Remote" }}
                    </span>
                    <span class="job-badge success">
                        {{ job.get_job_type_display }}
                    </span>
                    {% if job.salary_min %}
                    <span class="job-badge warning">
                        <i class="bi bi-currency-dollar"></i> {{ job.get_salary_range }}
                    </span>
                    {% endif %}
                </div>
                
                <div class="mb-3">
                    {% for skill in job.skills.all|slice:":5" %}
                        <span class="skill-tag">{{ skill.name }}</span>
                    {% endfor %}
                </div>
                
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">
                        <i class="bi bi-clock"></i> {{ job.posted_date|timesince }} ago
                    </small>
                    <a href="{% url 'job_detail' job.id %}" class="btn btn-sm btn-primary-custom">
                        View Details
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                <i class="bi bi-info-circle"></i> No jobs found matching your criteria.
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}